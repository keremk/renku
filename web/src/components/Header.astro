---
import ThemeSelect from './starlight/ThemeSelect.astro';
import IconGitHub from './icons/IconGitHub.astro';
import IconDiscord from './icons/IconDiscord.astro';
import IconMenu from './icons/IconMenu.astro';

const currentPath = Astro.url.pathname;

const navItems = [
  { label: 'Documentation', href: '/docs/' },
  { label: 'Blog', href: '/blog/' },
  { label: 'Community', href: '#discord' },
];

const socialLinks = [
  { icon: 'github', href: 'https://github.com/keremk/renku', label: 'GitHub' },
  { icon: 'discord', href: '#discord', label: 'Discord' },
];
---

<header class="site-header">
  <div class="px-4 sm:px-6 lg:px-8">
    <nav class="flex items-center justify-between h-16">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-3 no-underline group">
        <img
          src="/logo.svg"
          alt="Renku Logo"
          class="h-12 w-12 transition-transform duration-200 group-hover:scale-105"
        />
        <span class="text-2xl font-bold" style="color: var(--color-foreground);">Renku</span>
      </a>

      <!-- Navigation Links -->
      <div class="hidden md:flex items-center gap-10">
        {navItems.map((item) => (
          <a
            href={item.href}
            class:list={[
              'nav-link',
              currentPath.startsWith(item.href) && 'nav-link-active',
            ]}
          >
            {item.label}
          </a>
        ))}
      </div>

      <!-- Right side: Social Links + Theme toggle (rightmost) -->
      <div class="flex items-center gap-2">
        <div class="hidden sm:flex items-center gap-2">
          {socialLinks.map((link) => (
            <a href={link.href} class="social-link" aria-label={link.label}>
              {link.icon === 'github' && <IconGitHub />}
              {link.icon === 'discord' && <IconDiscord />}
            </a>
          ))}
        </div>

        <ThemeSelect />

        <!-- Mobile menu button -->
        <button
          class="md:hidden p-2 transition-colors duration-200 hover:text-accent-500"
          style="color: var(--color-gray-600); background: none; border: none; cursor: pointer;"
          aria-label="Toggle menu"
          id="mobile-menu-button"
        >
          <IconMenu />
        </button>
      </div>
    </nav>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden md:hidden pb-4 pt-4 mt-2 border-t" style="border-color: var(--color-border);">
      {navItems.map((item) => (
        <a
          href={item.href}
          class="block py-3 font-medium transition-colors duration-200 nav-link"
        >
          {item.label}
        </a>
      ))}
      <div class="flex items-center gap-4 mt-4 pt-4 border-t" style="border-color: var(--color-border);">
        {socialLinks.map((link) => (
          <a href={link.href} class="social-link" aria-label={link.label}>
            {link.icon === 'github' && <IconGitHub />}
            {link.icon === 'discord' && <IconDiscord />}
          </a>
        ))}
      </div>
    </div>
  </div>
</header>

<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });
</script>
