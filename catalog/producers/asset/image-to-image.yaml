meta:
  name: Image-to-Image Transformer
  description: Edit, transform, or generate variations of existing images.
  id: ImageToImageProducer
  version: 0.1.0
  author: Renku
  license: MIT

inputs:
  - name: Prompt
    description: Text instruction for the transformation.
    type: string
  - name: SourceImages
    description: Image(s) to edit or transform.
    type: collection
    itemType: image

  # Optional mask for selective editing
  - name: MaskImage
    description: Mask image for selective region editing (white=edit, black=keep).
    type: image

  # Sizing
  - name: AspectRatio
    description: "Output aspect ratio."
    type: string
  - name: Resolution
    description: "Output resolution preset (1K, 2K, 4K)."
    type: string
  - name: Width
    description: Custom output width in pixels.
    type: integer
  - name: Height
    description: Custom output height in pixels.
    type: integer

  # Edit control
  - name: Strength
    description: How much to transform the source image (0.0-1.0).
    type: number
  - name: NumImages
    description: Number of variations to generate.
    type: integer
  - name: Seed
    description: Random seed for reproducibility.
    type: integer
  - name: GuidanceScale
    description: Prompt adherence strength.
    type: number
  - name: NegativePrompt
    description: What to avoid in the output.
    type: string
  - name: EnhancePrompt
    description: Enable LLM prompt enhancement.
    type: boolean

  # Output
  - name: OutputFormat
    description: "Image format (jpeg, png, webp)."
    type: string

  # Safety
  - name: EnableSafetyChecker
    description: Enable content moderation.
    type: boolean

  # Model-specific
  - name: Quality
    description: "Image quality level (low, medium, high)."
    type: string
  - name: InputFidelity
    description: "Input image fidelity (low, high)."
    type: string

artifacts:
  - name: TransformedImage
    description: The edited/transformed image(s).
    type: image

mappings:
  fal-ai:
    qwen-image-edit-2511:
      Prompt: prompt
      SourceImages: image_urls
      NumImages: num_images
      Seed: seed
      GuidanceScale: guidance_scale
      NegativePrompt: negative_prompt
      EnableSafetyChecker: enable_safety_checker
      OutputFormat: output_format
      AspectRatio:
        field: image_size
        transform:
          "16:9": landscape_16_9
          "9:16": portrait_16_9
          "4:3": landscape_4_3
          "3:4": portrait_4_3
          "1:1": square_hd

    gpt-image-1-5-edit:
      Prompt: prompt
      SourceImages: image_urls
      MaskImage: mask_image_url
      NumImages: num_images
      OutputFormat: output_format
      Quality: quality
      InputFidelity: input_fidelity
      AspectRatio:
        field: image_size
        transform:
          "1:1": "1024x1024"
          "16:9": "1536x1024"
          "9:16": "1024x1536"
          "auto": "auto"

    wan-v2-6/image-to-image:
      Prompt: prompt
      SourceImages: image_urls
      Seed: seed
      NegativePrompt: negative_prompt
      NumImages: num_images
      EnhancePrompt: enable_prompt_expansion
      EnableSafetyChecker: enable_safety_checker
      AspectRatio:
        field: image_size
        transform:
          "16:9": landscape_16_9
          "9:16": portrait_16_9
          "4:3": landscape_4_3
          "3:4": portrait_4_3
          "1:1": square_hd

    flux-pro/kontext:
      Prompt: prompt
      SourceImages:
        field: image_url
        firstOf: true
      NumImages: num_images
      Seed: seed
      GuidanceScale: guidance_scale
      EnhancePrompt: enhance_prompt
      OutputFormat: output_format
      AspectRatio: aspect_ratio

    nano-banana-pro-edit:
      Prompt: prompt
      SourceImages: image_urls
      NumImages: num_images
      OutputFormat: output_format
      AspectRatio: aspect_ratio
      Resolution: resolution

  replicate:
    qwen/qwen-image-edit-2511:
      Prompt: prompt
      SourceImages: image
      Seed: seed
      OutputFormat: output_format
      EnableSafetyChecker:
        field: disable_safety_checker
        invert: true
      AspectRatio: aspect_ratio
