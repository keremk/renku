meta:
  name: Audio-to-Video Generator
  description: Generate lip-synced video from audio and character image.
  id: AudioToVideoProducer
  kind: producer
  version: 0.1.0
  author: Renku
  license: MIT

inputs:
  - name: Prompt
    description: Text prompt describing the video action and subject.
    type: string

  # Character
  - name: CharacterImage
    description: Character/avatar image for the talking head.
    type: image

  # Audio
  - name: AudioUrl
    description: URL to audio file for lip-sync.
    type: string

  # Duration
  - name: Duration
    description: Video duration in seconds (converted to frames for some models).
    type: integer

  # Sizing
  - name: Resolution
    description: "Resolution preset (480p, 720p)."
    type: string
  - name: AspectRatio
    description: "Aspect ratio (16:9, 9:16, 4:3, 3:4, 1:1)."
    type: string

artifacts:
  - name: GeneratedVideo
    description: The generated lip-synced video.
    type: video
  - name: FirstFrame
    description: The first frame of the generated video.
    type: image
  - name: LastFrame
    description: The last frame of the generated video.
    type: image
  - name: AudioTrack
    description: The audio track of the generated video.
    type: audio

  
mappings:
  fal-ai:
    # Creatify Aurora
    creatify/aurora:
      Prompt: prompt
      CharacterImage: image_url
      AudioUrl: audio_url
      Duration: duration
      Resolution: resolution

    # VEED Fabric 1.0 Fast
    veed/fabric-1.0/fast:
      CharacterImage: image_url
      AudioUrl: audio_url
      Duration: duration
      Resolution: resolution

    # InfiniTalk (Audio-driven)
    infinitalk:
      Prompt: prompt
      CharacterImage: image_url
      AudioUrl: audio_url
      # Duration in seconds â†’ num_frames (at 24fps)
      Duration:
        field: num_frames
        durationToFrames:
          fps: 24
      Resolution: resolution

    bytedance/omnihuman/v1.5:
      Prompt: prompt
      CharacterImage: image_url
      AudioUrl: audio_url
      Duration: duration
      Resolution: resolution

    # Wan v2.6 Image-to-Video (with audio support)
    wan/v2.6/image-to-video:
      Prompt: prompt
      CharacterImage: image_url
      AudioUrl: audio_url
      Duration:
        field: duration
        intToString: true
      Resolution: resolution

    # Wan v2.6 Image-to-Video Flash (with audio support)
    wan/v2.6/image-to-video/flash:
      Prompt: prompt
      CharacterImage: image_url
      AudioUrl: audio_url
      Duration:
        field: duration
        intToString: true
      Resolution: resolution

    # LTX-2-19b Distilled Audio-to-Video
    ltx-2-19b/distilled/audio-to-video:
      Prompt: prompt
      CharacterImage: image_url
      AudioUrl: audio_url
      Duration:
        field: num_frames
        durationToFrames:
          fps: 25
      VideoSize:
        field: video_size
        combine:
          inputs: [AspectRatio, Resolution]
          table:
            "16:9+480p": { width: 848, height: 480 }
            "16:9+720p": { width: 1280, height: 720 }
            "9:16+480p": { width: 480, height: 848 }
            "9:16+720p": { width: 720, height: 1280 }
            "4:3+480p": { width: 640, height: 480 }
            "4:3+720p": { width: 960, height: 720 }
            "3:4+480p": { width: 480, height: 640 }
            "3:4+720p": { width: 720, height: 960 }
            "1:1+480p": { width: 512, height: 512 }
            "1:1+720p": { width: 720, height: 720 }
            "16:9+": landscape_16_9
            "9:16+": portrait_16_9
            "4:3+": landscape_4_3
            "3:4+": portrait_4_3
            "1:1+": square_hd

    kling-video/ai-avatar/v2/standard:
      Prompt: prompt
      CharacterImage: image_url
      AudioUrl: audio_url
